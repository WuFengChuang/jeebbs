webpackJsonp([27],{1058:function(e,t,s){function a(e){s(1282)}var r=s(99)(s(1170),s(1368),a,null,null);e.exports=r.exports},1063:function(e,t,s){"use strict";function a(e){return s.i(q.a)({url:"/api/admin/group/list",method:"post",signValidate:!1,data:e})}function r(e){return s.i(q.a)({url:"/api/admin/group/delete",method:"post",signValidate:!0,data:e})}function o(e){return s.i(q.a)({url:"/api/admin/group/get",method:"post",signValidate:!1,data:e})}function n(e){return s.i(q.a)({url:"/api/admin/group/update",method:"post",signValidate:!0,data:e})}function i(e){return s.i(q.a)({url:"/api/admin/group/save",method:"post",signValidate:!0,data:e})}function l(e){return s.i(q.a)({url:"/api/admin/user/list",method:"post",signValidate:!1,data:e})}function u(e){return s.i(q.a)({url:"/api/admin/user/official_list",method:"post",signValidate:!1,data:e})}function d(e){return s.i(q.a)({url:"/api/admin/user/get",method:"post",signValidate:!1,data:e})}function c(e){return s.i(q.a)({url:"/api/admin/user/update",method:"post",signValidate:!0,data:e})}function p(e){return s.i(q.a)({url:"/api/admin/user/save",method:"post",signValidate:!0,data:e})}function f(e){return s.i(q.a)({url:"/api/admin/user/delete",method:"post",signValidate:!0,data:e})}function m(e){return s.i(q.a)({url:"/api/admin/admin/list",method:"post",signValidate:!1,data:e})}function g(e){return s.i(q.a)({url:"/api/admin/admin/update",method:"post",signValidate:!0,data:e})}function v(e){return s.i(q.a)({url:"/api/admin/admin/save",method:"post",signValidate:!0,data:e})}function h(e){return s.i(q.a)({url:"/api/admin/role/list",method:"post",signValidate:!1,data:e})}function I(e){return s.i(q.a)({url:"/api/admin/role/delete",method:"post",signValidate:!0,data:e})}function b(e){return s.i(q.a)({url:"/api/admin/role/get",method:"post",signValidate:!1,data:e})}function _(e){return s.i(q.a)({url:"/api/admin/role/update",method:"post",signValidate:!0,data:e})}function $(e){return s.i(q.a)({url:"/api/admin/account/list",method:"post",signValidate:!0,data:e})}function y(e){return s.i(q.a)({url:"/api/admin/account/delete",method:"post",signValidate:!0,data:e})}function C(e){return s.i(q.a)({url:"/api/admin/message/sys_list",method:"post",signValidate:!0,data:e})}function k(e){return s.i(q.a)({url:"/api/admin/message/delete",method:"post",signValidate:!0,data:e})}function x(e){return s.i(q.a)({url:"/api/admin/message/sendSys",method:"post",signValidate:!0,data:e})}t.a=a,t.w=r,t.t=o,t.u=n,t.v=i,t.s=l,t.n=u,t.k=d,t.l=c,t.m=p,t.o=f,t.r=m,t.p=g,t.q=v,t.i=h,t.j=I,t.g=b,t.h=_,t.e=$,t.f=y,t.c=C,t.d=k,t.b=x;var q=s(224),V=s(151);s.n(V)},1170:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(1063);t.default={data:function(){var e=this,t=function(t,s,a){""===s?a():(""!==e.userInfo.checkPass&&e.$refs.userInfo.validateField("checkPass"),a())},s=function(t,s,a){""===s?a():s!==e.userInfo.password?a(new Error("两次输入密码不一致!")):a()};return{sex:{man:!0,woman:!1,other:""},userInfo:{password:"",checkPass:""},groupList:[],rules:{},rulesList:{email:[{validator:function(e,t,s){if(""===t)s();else{/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(t)?s():s(new Error("请输入正确的邮箱地址"))}},trigger:"blur"}],groupId:[{type:"number",required:!0,message:"请选择一个会员组",trigger:"change"}],password:[{validator:t,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}]}}},methods:{getuserGroupList:function(){var e=this;a.a({groupType:-1}).then(function(t){e.groupList=t.body})},getUserInfo:function(e){var t=this;a.k({id:e}).then(function(e){"100"==e.code?(t.userInfo=e.body,t.userInfo.password="",t.userInfo.checkPass="","add"==t.$route.query.type&&(t.userInfo.groupId=1)):t.$message.error(e.message)}).catch(function(e){t.$message.error("数据拉取异常")})},updateUserInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s=t.userInfo;a.l(s).then(function(e){console.log(e),"100"==e.code?(t.$message.success("修改成功"),setTimeout(function(){t.$router.push({path:"/userlist"})},500)):t.$message.error(e.message)}).catch(function(e){t.$message.error("修改失败")})})},addUserInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s=t.userInfo;a.m(s).then(function(e){console.log(e),"100"==e.code?(t.$message.success("添加成功"),setTimeout(function(){t.$router.push({path:"/userlist"})},500)):t.$message.error(e.message)}).catch(function(e){t.$message.error("修改失败")})})},resetForm:function(e){console.log(111);this.$route.query.id;this.$refs[e].resetFields()},formatDate:function(e){this.userInfo.birthday=e}},created:function(){var e=this.$route.query.type,t=this.$route.query.id;this.getuserGroupList(),"add"==e?(this.getUserInfo(t),this.rules=this.rulesList):"edit"==e&&(this.getUserInfo(t),this.rules=this.rulesList)}}},1197:function(e,t,s){t=e.exports=s(976)(!1),t.push([e.i,"",""])},1282:function(e,t,s){var a=s(1197);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(977)("23d588a8",a,!0)},1368:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"forum-module"},[s("div",{staticClass:"forum-header"},[s("span",{staticClass:"forum-name"},[e._v(e._s(e.$route.name))]),e._v(" "),s("span",{staticClass:"forum-hint"},[e._v('带"*"号的为必填项')])]),e._v(" "),s("div",{staticClass:"table-body table-responsive"},[s("el-form",{ref:"userInfo",attrs:{rules:e.rules,model:e.userInfo}},[s("el-form-item",{staticClass:"form-group",attrs:{label:"用户名"}},[s("el-col",{attrs:{span:6}},["add"==e.$route.query.type?s("el-input",{model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}}):s("label",[e._v(e._s(e.userInfo.username))])],1),e._v(" "),"add"==e.$route.query.type?s("el-col",{staticClass:"required",attrs:{span:1}},[e._v("* ")]):e._e()],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"电子邮件",prop:"email"}},[s("el-col",{attrs:{span:6}},[s("el-input",{model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),e._v(" "),s("el-col",{staticClass:"required",attrs:{span:1}},[e._v("  ")]),e._v(" "),s("el-col",{staticClass:"gray",attrs:{span:10}},[e._v("用于找回密码")])],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"密码",prop:"password"}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),e._v(" "),s("el-col",{staticClass:"required",attrs:{span:1}},[e._v("  ")]),e._v(" "),s("el-col",{staticClass:"gray",attrs:{span:10}},[e._v(" 不修改请留空")])],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"重复密码",prop:"checkPass"}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.userInfo.checkPass,callback:function(t){e.$set(e.userInfo,"checkPass",t)},expression:"userInfo.checkPass"}})],1),e._v(" "),s("el-col",{staticClass:"required",attrs:{span:1}},[e._v("  ")]),e._v(" "),s("el-col",{staticClass:"gray",attrs:{span:10}},[e._v(" 不修改请留空")])],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"会员组",prop:"groupId"}},[s("el-col",{attrs:{span:6}},[s("el-select",{attrs:{placeholder:"用户组"},model:{value:e.userInfo.groupId,callback:function(t){e.$set(e.userInfo,"groupId",t)},expression:"userInfo.groupId"}},e._l(e.groupList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-col",{staticClass:"required",attrs:{span:1}},[e._v("  ")])],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"是否启禁用"}},[s("el-col",{attrs:{span:1}},[s("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.userInfo.disabled,callback:function(t){e.$set(e.userInfo,"disabled",t)},expression:"userInfo.disabled"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"真实姓名",prop:"realname"}},[s("el-col",{attrs:{span:6}},[s("el-input",{model:{value:e.userInfo.realname,callback:function(t){e.$set(e.userInfo,"realname",t)},expression:"userInfo.realname"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"性别",prop:"gender"}},[s("el-col",{attrs:{span:8}},[s("el-radio",{staticClass:"radio",attrs:{label:e.sex.man},model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[e._v("男")]),e._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:e.sex.woman},model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[e._v("女")]),e._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:e.sex.other},model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[e._v("保密")])],1)],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"出生日期",prop:"birth"}},[s("el-col",{attrs:{span:6}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:e.formatDate},model:{value:e.userInfo.birthday,callback:function(t){e.$set(e.userInfo,"birthday",t)},expression:"userInfo.birthday"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"手机号码",prop:"phone"}},[s("el-col",{attrs:{span:6}},[s("el-input",{model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"QQ",prop:"qq"}},[s("el-col",{attrs:{span:6}},[s("el-input",{model:{value:e.userInfo.qq,callback:function(t){e.$set(e.userInfo,"qq",t)},expression:"userInfo.qq"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"来自",prop:"comefrom"}},[s("el-col",{attrs:{span:6}},[s("el-input",{model:{value:e.userInfo.comefrom,callback:function(t){e.$set(e.userInfo,"comefrom",t)},expression:"userInfo.comefrom"}})],1)],1),e._v(" "),s("el-form-item",{staticClass:"form-group",attrs:{label:"个性签名",prop:"intro"}},[s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.userInfo.intro,callback:function(t){e.$set(e.userInfo,"intro",t)},expression:"userInfo.intro"}})],1)],1)],1),e._v(" "),s("div",{staticClass:"margin-md"},["edit"==e.$route.query.type?s("input",{staticClass:"bbs-submit",attrs:{type:"button",value:"提交"},on:{click:function(t){e.updateUserInfo("userInfo")}}}):e._e(),e._v(" "),"add"==e.$route.query.type?s("input",{staticClass:"bbs-submit",attrs:{type:"button",value:"提交"},on:{click:function(t){e.addUserInfo("userInfo")}}}):e._e(),e._v(" "),s("input",{staticClass:"bbs-reset",attrs:{type:"reset",value:"重置"},on:{click:function(t){e.resetForm("userInfo")}}})])],1)])},staticRenderFns:[]}}});