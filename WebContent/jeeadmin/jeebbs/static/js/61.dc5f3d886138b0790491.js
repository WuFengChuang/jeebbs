webpackJsonp([61],{1082:function(e,t,a){"use strict";function r(e){return a.i($.a)({url:"/api/admin/resource/tree",method:"post",data:e})}function o(e){return a.i($.a)({url:"/api/admin/resource/list",method:"post",data:e})}function i(e){return a.i($.a)({url:"/api/admin/template/list",method:"post",data:e})}function n(e){return a.i($.a)({url:"/api/admin/resource/get",method:"post",data:e})}function s(e){return a.i($.a)({url:"/api/admin/template/get",method:"post",data:e})}function u(e){return a.i($.a)({url:"/api/admin/resource/delete",method:"post",signValidate:!0,data:e})}function l(e){return a.i($.a)({url:"/api/admin/template/delete",method:"post",signValidate:!0,data:e})}function c(e){return a.i($.a)({url:"api/admin/resource/dir_save",method:"post",signValidate:!0,data:e})}function d(e){return a.i($.a)({url:"api/admin/template/dir_save",method:"post",signValidate:!0,data:e})}function m(e){return a.i($.a)({url:"/api/admin/resource/rename",method:"post",signValidate:!0,data:e})}function p(e){return a.i($.a)({url:"/api/admin/template/rename",method:"post",signValidate:!0,data:e})}function f(e){return a.i($.a)({url:"/api/admin/template/update",method:"post",signValidate:!0,data:e})}function h(e){return a.i($.a)({url:"/api/admin/resource/save",method:"post",signValidate:!0,data:e})}function g(e){return a.i($.a)({url:"/api/admin/template/save",method:"post",signValidate:!0,data:e})}function v(e){return a.i($.a)({url:"/api/admin/template/tree",method:"post",data:e})}function b(e){return a.i($.a)({url:"/api/admin/template/getSolutions",method:"post",data:e})}function y(e){return a.i($.a)({url:"/api/admin/template/solutionupdate",method:"post",signValidate:!0,data:e})}t.q=r,t.n=o,t.g=i,t.l=n,t.d=s,t.p=u,t.i=l,t.o=c,t.h=d,t.k=m,t.c=p,t.e=f,t.m=h,t.f=g,t.j=v,t.a=b,t.b=y;var $=a(224),I=a(151);a.n(I)},1100:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var r=a(1082);t.default={data:function(){return{loading:!0,count:0,state:!1,resourceInfo:{filename:"",source:""},showFileName:"",rules:{name:[{required:!0,message:"请填写一个主题分类名",trigger:"blur"}],path:[{required:!0,message:"请填写一个路径",trigger:"blur"}],priority:[{required:!0,type:"number",message:"请填写一个数字排序",trigger:"blur"}]}}},methods:{getResourceInfo:function(e){var t=this;r.l({name:e}).then(function(e){t.loading=!1,console.log(e),t.resourceInfo.source=e.body}).catch(function(e){t.loading=!1,t.$message.error("数据拉取异常")})},updateResourceInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.resourceInfo;r.e(a).then(function(e){"100"==e.code?(t.$message.success("修改成功"),setTimeout(function(){t.$router.push({path:"/resourcelist",query:{name:t.$route.query.root,noceStr:Math.round(10*Math.random())}})},1e3)):t.$message.error("1")}).catch(function(e){t.$message.error("修改失败")})})},addResourceInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.resourceInfo.root=t.resourceInfo.filename,t.resourceInfo.filename=t.showFileName;var a=t.resourceInfo;r.m(a).then(function(e){"100"==e.code?t.$message.success("添加成功"):t.$message.error(e.message)}).catch(function(e){t.$message.error("添加失败")})})},back:function(){this.$router.push({path:"/resourcelist",query:{name:this.$route.query.root,noceStr:Math.round(10*Math.random())}})},resetForm:function(e){this.$route.query.id;this.$refs[e].resetFields()},stringReplace:function(e){var t=e.lastIndexOf("/");return e=e.substring(t+1,e.length)}},created:function(){e("#tmp").slimScroll({height:"100%",width:"100%",color:"#999",opacity:.5});var t=this.$route.query.type,a=this.$route.query.id;this.$route.query.rootId;"add"==t?(this.resourceInfo.filename=a,this.loading=!1):"edit"==t&&(this.resourceInfo.filename=a,this.showFileName=this.stringReplace(a),this.getResourceInfo(a))},watch:{$route:function(e,t){this.loading=!0;var a=this.$route.query.id;this.showFileName=this.stringReplace(a),this.getResourceInfo(a)}}}}.call(t,a(103))},1248:function(e,t,a){t=e.exports=a(976)(!1),t.push([e.i,"",""])},1333:function(e,t,a){var r=a(1248);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(977)("3e2f9113",r,!0)},1419:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"forum-module"},[a("div",{staticClass:"forum-header"},[a("span",{staticClass:"forum-name"},[e._v(e._s(e.$route.name))]),e._v(" "),a("div",{staticClass:"pull-right"},[a("el-button",{on:{click:e.back}},[e._v("返回列表")])],1)]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-body table-responsive"},[a("el-form",{ref:"topicInfo",attrs:{rules:e.rules,model:e.resourceInfo}},[a("el-form-item",{staticClass:"form-group",attrs:{label:"文件名"}},[a("el-col",{attrs:{span:6}},["edit"==e.$route.query.type?a("el-input",{attrs:{disabled:!0},model:{value:e.showFileName,callback:function(t){e.showFileName=t},expression:"showFileName"}}):e._e(),e._v(" "),"add"==e.$route.query.type?a("el-input",{model:{value:e.showFileName,callback:function(t){e.showFileName=t},expression:"showFileName"}}):e._e()],1)],1),e._v(" "),a("el-form-item",{staticClass:"form-group",attrs:{label:" "}},[a("el-col",{attrs:{span:24}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.resourceInfo.source,expression:"resourceInfo.source"}],staticStyle:{width:"100%",outline:"none"},attrs:{rows:"25"},domProps:{value:e.resourceInfo.source},on:{input:function(t){t.target.composing||e.$set(e.resourceInfo,"source",t.target.value)}}})])],1)],1),e._v(" "),a("div",{staticClass:"margin-md"},["edit"==e.$route.query.type?a("input",{staticClass:"bbs-submit",attrs:{type:"button",value:"提交"},on:{click:function(t){e.updateResourceInfo("topicInfo")}}}):e._e(),e._v(" "),"add"==e.$route.query.type?a("input",{staticClass:"bbs-submit",attrs:{type:"button",value:"提交"},on:{click:function(t){e.addResourceInfo("topicInfo")}}}):e._e(),e._v(" "),a("input",{staticClass:"bbs-reset",attrs:{type:"reset",value:"重置"}})])],1)])},staticRenderFns:[]}},988:function(e,t,a){function r(e){a(1333)}var o=a(99)(a(1100),a(1419),r,null,null);e.exports=o.exports}});