webpackJsonp([72],{604:function(e,t,a){function i(e){a(888)}var s=a(66)(a(698),a(975),i,"data-v-5b3ed194",null);e.exports=s.exports},698:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(228);t.default={data:function(){return{loading:!0,liveList:[],livehost:[],ids:"",sort:[{label:"待审核",value:0},{label:"已审核",value:1}],groupList:[],params:{pageNo:1,pageSize:20,queryMode:0,qTitle:"",qUsername:"",orderBy:""},totalCount:0,currentPage:1,changePageSize:localStorage.getItem("PageSize"),disabled:!0}},methods:{applyCheck:function(e){var t=this;this.ids=e,this.$confirm("您确定要通过吗?","警告",{type:"warning"}).then(function(e){i.f({ids:t.ids}).then(function(e){t.loading=!1,"100"==e.code?(t.$message.success("操作成功"),t.getLiveApplyList()):t.$message.error(e.message)}).catch(function(e){t.loading=!1,t.$message.error("网络异常")})}).catch(function(e){})},applyReject:function(e){var t=this;this.ids=e,this.$confirm("您确定要拒绝吗?","警告",{type:"warning"}).then(function(e){i.g({ids:t.ids}).then(function(e){t.loading=!1,"100"==e.code?(t.$message.success("操作成功"),t.getLiveApplyList()):t.$message.error(e.message)}).catch(function(e){t.loading=!1,t.$message.error("网络异常")})}).catch(function(e){})},getLiveHostList:function(){var e=this,t=this.params;i.h(t).then(function(t){"100"==t.code?(e.liveList=t.body,e.totalCount=t.totalCount,e.loading=!1):(e.loading=!1,e.$message.error(t.message))}).catch(function(t){e.loading=!1,e.$message.error("网络异常")})},getLiveApplyList:function(){var e=this,t=this.params;i.i(t).then(function(t){"100"==t.code?(e.livehost=t.body,e.totalCount=t.totalCount,e.loading=!1):(e.loading=!1,e.$message.error(t.message))}).catch(function(t){e.loading=!1,e.$message.error("网络异常")})},queryCtg:function(e){this.loading=!0,this.params.pageNo=1,this.pageSize=20,this.getLiveApplyList(),this.getLiveHostList()},hostsLink:function(){this.$router.push({path:"/hostlist",query:{noceStr:Math.round(10*Math.random())}})},liveLink:function(){this.$router.push({path:"/livelist",query:{noceStr:Math.round(10*Math.random())}})},liveConfig:function(){this.$router.push({path:"/liveconfig",query:{noceStr:Math.round(10*Math.random())}})},savePriority:function(){var e=this;this.loading=!0;for(var t=this.liveList,a={ids:[],priorities:[]},s=0;s<t.length;s++)a.ids.push(t[s].id),a.priorities.push(t[s].topPriority);a.ids=a.ids.join(","),a.priorities=a.priorities.join(","),i.j(a).then(function(t){e.loading=!1,"100"==t.code?(e.$message.success("保存成功"),e.getLiveHostList()):e.$message.error(t.message)}).catch(function(t){e.loading=!1,e.$message.error("保存异常")})},deleteHosts:function(e){var t=this;this.ids=e,this.$confirm("您确定要删除吗?","警告",{type:"warning"}).then(function(e){i.k({ids:t.ids}).then(function(e){t.loading=!1,"100"==e.code?(t.$message.success("删除成功"),t.getLiveHostList()):t.$message.error(e.message)}).catch(function(e){t.loading=!1,t.$message.error("网络异常")})}).catch(function(e){})},getPage:function(e){this.loading=!0,this.params.pageNo=e,this.getLiveHostList(),this.getLiveApplyList()},getSize:function(e){this.loading=!0,this.params.pageNo=e,this.getLiveHostList(),this.getLiveApplyList()},changeSize:function(e){var t=e.target.value;t<1?(localStorage.setItem("PageSize",20),t=20):localStorage.setItem("PageSize",t),this.loading=!0,this.params.pageSize=parseInt(t),this.params.pageNo=1,this.currentPage=1,this.getLiveHostList(),this.getLiveApplyList()},checkIds:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);0==t.length?(this.ids="",this.disabled=!0):(this.ids=t.join(","),this.disabled=!1)}},created:function(){this.$route.query.select&&(this.params.queryMode=0);var e=localStorage.getItem("PageSize");null!=e?this.params.pageSize=parseInt(e):this.changePageSize=20,this.getLiveHostList(),this.getLiveApplyList()},watch:{$route:function(e,t){this.loading=!0,this.getLiveHostList(),this.getLiveApplyList()}}}},802:function(e,t,a){t=e.exports=a(570)(!1),t.push([e.i,".forum-name[data-v-5b3ed194]{cursor:pointer}",""])},888:function(e,t,a){var i=a(802);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(571)("4964ad0a",i,!0)},975:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"forum-module"},[a("div",{staticClass:"forum-header"},[a("span",{staticClass:"forum-name tab-name ",on:{click:e.liveLink}},[e._v("直播管理")]),e._v(" "),a("span",{staticClass:"forum-name tab-name active",on:{click:e.hostsLink}},[e._v("主播管理")]),e._v(" "),a("span",{staticClass:"forum-name tab-name",on:{click:e.liveConfig}},[e._v("直播配置")])]),e._v(" "),a("div",{staticClass:"table-top-bar clearfix"},[a("el-select",{on:{change:e.queryCtg},model:{value:e.params.queryMode,callback:function(t){e.$set(e.params,"queryMode",t)},expression:"params.queryMode"}},e._l(e.sort,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"table-responsive"},[a("form",{staticClass:"form-horizontal no-margin"},[0==e.params.queryMode?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.livehost},on:{"selection-change":e.checkIds}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"68"}}),e._v(" "),a("el-table-column",{attrs:{label:"主播",prop:"username",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"申请时间",prop:"applyTime",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"t-edit iconfont bbs-duigouzhuanhuan",attrs:{href:"javascript:void(0)",title:"通过"},on:{click:function(a){e.applyCheck(t.row.id)}}}),e._v(" "),a("a",{staticClass:"t-del iconfont bbs-guanbi",attrs:{href:"javascript:void(0)",title:"拒绝"},on:{click:function(a){e.applyReject(t.row.id)}}})]}}])})],1):e._e(),e._v(" "),1==e.params.queryMode?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.liveList},on:{"selection-change":e.checkIds}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"68"}}),e._v(" "),a("el-table-column",{attrs:{label:"排序",prop:"userName",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.topPriority,callback:function(a){e.$set(t.row,"topPriority",a)},expression:"scope.row.topPriority"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"主播",prop:"userName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"通过时间",prop:"checkTime",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"总门票数",prop:"ticketNum",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"总收益",prop:"totalAmount",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"总礼物数",prop:"giftNum",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:200},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"t-del iconfont bbs-delete",attrs:{href:"javascript:void(0)",title:"删除"},on:{click:function(a){e.deleteHosts(t.row.id)}}})]}}])})],1):e._e()],1)]),e._v(" "),a("div",{staticClass:"table-bottom-bar"},[a("div",{staticClass:"pull-left"},[0==e.params.queryMode?a("el-button",{staticClass:"btn-pass",attrs:{disabled:e.disabled},on:{click:function(t){e.applyCheck(e.ids)}}},[e._v("批量通过")]):e._e(),e._v(" "),0==e.params.queryMode?a("el-button",{staticClass:"btn-refuse",attrs:{disabled:e.disabled},on:{click:function(t){e.applyReject(e.ids)}}},[e._v("批量拒绝")]):e._e(),e._v(" "),1==e.params.queryMode?a("el-button",{attrs:{type:"primary"},on:{click:e.savePriority}},[e._v("保存排序")]):e._e(),e._v(" "),0==e.params.queryMode?a("el-button",{staticClass:"btn-refuse",attrs:{disabled:e.disabled},on:{click:function(t){e.deleteHosts(e.ids)}}},[e._v("批量删除")]):e._e(),e._v(" "),a("span",{staticClass:"ml-48"},[e._v("每页显示\n                "),a("el-input",{staticClass:"input-sm",attrs:{type:"number",min:"1",max:"50"},on:{blur:e.changeSize},model:{value:e.changePageSize,callback:function(t){e.changePageSize=t},expression:"changePageSize"}}),e._v("条,输入后按回车")],1)],1),e._v(" "),a("div",{staticClass:"pull-right"},[a("el-pagination",{attrs:{layout:"total,prev, pager, next",total:e.totalCount,"page-size":e.params.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.getPage,"size-change":e.getSize}})],1)])])},staticRenderFns:[]}}});